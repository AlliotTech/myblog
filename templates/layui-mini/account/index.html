{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>个人中心—首页</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="{% static 'layui-mini/lib/layui-v2.5.5/css/layui.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'fontawesome-free-5.11.2-web/css/all.min.css' %}" media='all'/>
    <link rel="stylesheet" href="{% static 'layui-mini/css/public.css' %}" media="all">
    <link rel="stylesheet" href="{% static 'css/layui-mini.css' %}" media="all">
    <style>
        .top-panel {
            border: 1px solid #eceff9;
            border-radius: 5px;
            text-align: center;
        }

        .top-panel > .layui-card-body {
            height: 60px;
        }

        .top-panel-number {
            line-height: 60px;
            font-size: 30px;
            border-right: 1px solid #eceff9;
        }

        .top-panel-tips {
            line-height: 30px;
            font-size: 12px
        }
    </style>
</head>
<body>
<!--<div class="layuimini-container">-->
<div class="layuimini-main">
    <div class="layui-row layui-col-space15">
        <div class="layui-col-xs12 layui-col-md6">
            <div class="layui-card top-panel">
                <div class="layui-card-header">我的信息</div>
                <div class="layui-field-box">
                    <table class="layui-table" lay-even="" lay-skin="nob">
                        <thead>
                        <tr>
                            <th>用户名：</th>
                            <th>{{ user.username }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>性别：</td>
                            <td>{{ userinfo.get_sex_display }}</td>
                        </tr>
                        <tr>
                            <td>邮箱：</td>
                            <td>{{ user.email }}</td>
                        </tr>
                        <tr>
                            <td>手机：</td>
                            <td>{{ userinfo.phone }}</td>
                        </tr>
                        <tr>
                            <td>个人站点：</td>
                            <td>{{ userinfo.web }}</td>
                        </tr>
                        <tr>
                            <td>个性签名：</td>
                            <td>{{ userinfo.aboutme }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="layui-col-xs12 layui-col-md6">
            <div class="layui-card top-panel">
                <div class="layui-card-header">我的记录</div>
                <div class="layui-field-box">
                    <table class="layui-table" lay-even="" lay-skin="nob">
                        <thead>
                        <tr>
                            <th>注册时间：</th>
                            <th>{{ user.date_joined }}</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>上次登录时间：</td>
                            <td>{{ user.last_login }}</td>
                        </tr>
                        <tr>
                            <td>浏览文章数：</td>
                            <td>{{ view_count }}篇</td>
                        </tr>
                        <tr>
                            <td>收藏文章数：</td>
                            <td>{{ like_count }}篇</td>
                        </tr>
                        <tr>
                            <td>发表评论数：</td>
                            <td>{{ comment_count }}条</td>
                        </tr>
                        <tr>
                            <td>发表留言数：</td>
                            <td>{{ leave_count }}条</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="layui-row layui-col-space15">
        <div class="layui-col-xs12 layui-col-md9">
            <div id="echarts-records" style="background-color:#ffffff;min-height:400px;padding: 10px"></div>
        </div>
        <div class="layui-col-xs12 layui-col-md3">
            <div id="echarts-pies" style="background-color:#ffffff;min-height:400px;padding: 10px"></div>
        </div>
    </div>


    <div class="layui-row layui-col-space15">
        <div class="layui-col-xs12 layui-col-md6">
            <div id="echarts-dataset" style="background-color:#ffffff;min-height:300px;padding: 10px"></div>
        </div>
        <div class="layui-col-xs12 layui-col-md6">
            <div id="echarts-map" style="background-color:#ffffff;min-height:300px;padding: 10px"></div>
        </div>
    </div>


</div>
<!--</div>-->
<script src="{% static 'layui-mini/lib/layui-v2.5.5/layui.js' %}" charset="utf-8"></script>
<script src="{% static 'layui-mini/js/lay-config.js' %}" charset="utf-8"></script>
<script src="{% static 'echarts/echarts.min.js' %}" charset="utf-8"></script>
<script src="{% static 'echarts/walden.js' %}" charset="utf-8"></script>
<script>
    layui.use(['layer'], function () {
        var $ = layui.jquery,
            layer = layui.layer;


    });
</script>
<script>
    /**
     * 报表功能
     */
    var echartsRecords = echarts.init(document.getElementById('echarts-records'), 'walden');

    var optionRecords = {
        title: {
            text: '浏览趋势'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            }
        },
        legend: {
            data: ['浏览文章数', '收藏文章数', '评论文章数']
        },
        toolbox: {
            feature: {
                saveAsImage: {}
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: false,
                data: ['7天前', '6天前', '5天前', '4天前', '3天前', '昨天', '今天']
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name: '浏览文章数',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: [10, 13, 10, 14, 9, 23, 21]
            },
            {
                name: '收藏文章数',
                type: 'line',
                areaStyle: {},
                data: [2, 12, 9, 4, 2, 13, 6]
            },
            {
                name: '评论文章数',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: [10, 12, 11, 15, 19, 12, 40]
            }
        ]
    };
    echartsRecords.setOption(optionRecords);


    /**
     * 玫瑰图表
     */
    var echartsPies = echarts.init(document.getElementById('echarts-pies'), 'walden');
    var optionPies = {
        title: {
            text: '浏览文章分类',
            left: 'center'
        },
        tooltip: {
            trigger: 'item',
            formatter: '{a} <br/>{b} : {c} ({d}%)'
        },
        legend: {
            orient: 'vertical',
            left: 'left',
            data: ['Linux', 'Django', 'Python', 'MySQL', 'docker', ' k8s']
        },
        series: [
            {
                name: '访问来源',
                type: 'pie',
                radius: '55%',
                center: ['50%', '60%'],
                roseType: 'radius',
                data: [
                    {value: 35, name: 'Linux'},
                    {value: 10, name: 'Django'},
                    {value: 34, name: 'Python'},
                    {value: 15, name: 'MySQL'},
                    {value: 28, name: 'docker'},
                    {value: 8, name: 'k8s'},
                ],
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    echartsPies.setOption(optionPies);


    /**
     * 柱状图
     */
    var echartsDataset = echarts.init(document.getElementById('echarts-dataset'), 'walden');

    var optionDataset = {
        title: {
            text: '浏览时间分布',
            left: 'left'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis: [
            {
                type: 'category',
                data: ['00', '02', '04', '06', '08', '10', '12', '14', '16', '18', '20', '22', '24'],
                axisTick: {
                    alignWithLabel: true
                }
            }
        ],
        yAxis: [
            {
                type: 'value'
            }
        ],
        series: [
            {
                name: '浏览文章数',
                type: 'bar',
                barWidth: '60%',
                data: [0, 0, 0, 0, 1, 3, 6, 9, 3, 5, 7, 14, 11, 9]
            }
        ]
    };

    echartsDataset.setOption(optionDataset);


    /**
     * 雷达图
     */
    var echartsMap = echarts.init(document.getElementById('echarts-map'), 'walden');


    var optionMap = {
        title: {
            text: '评论分布'
        },
        tooltip: {},
        legend: {
            data: ['评论数量']
        },
        radar: {
            // shape: 'circle',
            name: {
                textStyle: {
                    color: '#fff',
                    backgroundColor: '#999',
                    borderRadius: 3,
                    padding: [3, 5]
                }
            },
            indicator: [
                {name: 'Linux', max: 65},
                {name: 'Django', max: 16},
                {name: 'Python', max: 30},
                {name: 'MySQL', max: 38},
                {name: 'docker', max: 52},
                {name: 'k8s', max: 25}
            ]
        },
        series: [{
            type: 'radar',
            // areaStyle: {normal: {}},
            data: [
                {
                    value: [3, 10, 28, 25, 5, 19],
                    name: '文章评论数'
                }
            ]
        }]
    };
    echartsMap.setOption(optionMap);
    // echarts 窗口缩放自适应
    window.onresize = function () {
        echartsRecords.resize();
    }
</script>
</body>
</html>
