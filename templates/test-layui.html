<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>重置密码</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="../static/images/favicon.ico"/>
    <link rel="stylesheet" href="../static/layui/css/layui.css">
    <link rel="stylesheet" href="../static/css/public.css">
    <link rel="stylesheet" href="../static/css/blog.css">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>信息流 - 滚动加载</legend>
</fieldset>

<ul class="flow-default" style="height: 300px" id="LAY_demo1"></ul>

<script src="../static/layui/layui.all.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述js路径需要改成你本地的 -->
<script>
    layui.use('flow', function () {
        var flow = layui.flow;

        flow.load({
            elem: '#LAY_demo1' //流加载容器
            , done: function (page, next) { //执行下一页的回调
                //模拟数据插入
                setTimeout(function () {
                    var lis = [];
                    for (var i = 0; i < 8; i++) {
                        var content = "<div class=\"layui-row layui-col-space20 article-box\">\n" +
                        "    <div class=\"layui-col-xs12 layui-col-md4\">\n" +
                        "        <div class=\"img-cover img-zoom\">\n" +
                        "            <a href=\"/blog/show-18\" title=\"django测试页8\">\n" +
                        "                <img width=\"100%\" src=\"../media/cover/286968.jpg\">\n" +
                        "            </a>\n" +
                        "        </div>\n" +
                        "    </div>\n" +
                        "    <div class=\"layui-col-xs12 layui-col-md8\">\n" +
                        "        <h3>\n" +
                        "            <a href=\"/blog/show-18\">django测试页8</a>\n" +
                        "        </h3>\n" +
                        "        <p class=\"txt-cont hidden-xs\">\n" +
                        "            <a href=\"/blog/show-18\">这是django内容测试页</a>\n" +
                        "        </p>\n" +
                        "        <div class=\"list-article-info\">\n" +
                        "            <a href=\"/blog/category-1\" class=\"label-tag tag-color-1\">Linux</a>\n" +
                        "            <span>\n" +
                        "                <i class=\"fas fa-clock\">\n" +
                        "                    <span class=\"timeago\" datetime=\"2020-09-21 22:17:51\" data-tid=\"18\">1天前</span>\n" +
                        "                </i>\n" +
                        "            </span>\n" +
                        "            <span>\n" +
                        "                <i class=\"fas fa-eye\">0</i>\n" +
                        "            </span>\n" +
                        "            <span>\n" +
                        "                <i class=\"fas fa-thumbs-up\">0</i>\n" +
                        "            </span>\n" +
                        "            <span>\n" +
                        "                <i class=\"fas fa-heart\">0</i>\n" +
                        "            </span>\n" +
                        "        </div>\n" +
                        "    </div>\n" +
                        "</div>"
                        lis.push(content)
                    }
                    console.log(page)
                    console.log(lis)
                    //执行下一页渲染，第二参数为：满足“加载更多”的条件，即后面仍有分页
                    //pages为Ajax返回的总页数，只有当前页小于总页数的情况下，才会继续出现加载更多
                    next(lis.join(''), page < 10); //假设总页数为 10
                }, 500);
            }
        });
    });
</script>

</body>
</html>